<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>UBC Micromet - Calibration Procedures</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">UBC Micromet</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Documentation.html">
 <span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./FieldWorkProcedures.html" aria-current="page">
 <span class="menu-text">Site Monitoring &amp; Field Work</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Data.html">
 <span class="menu-text">Field Sites &amp; Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./OutreachNews.html">
 <span class="menu-text">Outreach and News</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ubc-micromet"><i class="bi bi-github" role="img" aria-label="Quarto GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Calibration Procedures</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DailyMonitoring.html" class="sidebar-item-text sidebar-link">Daily Site Monitoring</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FieldWorkProcedures.html" class="sidebar-item-text sidebar-link">Site Visits &amp; Maintenance Procedures</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Calibration.html" class="sidebar-item-text sidebar-link active">Calibration</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Cleaning.html" class="sidebar-item-text sidebar-link">Cleaning</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#to-do-should-we-formally-require-calibration-on-each-site-visit" id="toc-to-do-should-we-formally-require-calibration-on-each-site-visit" class="nav-link active" data-scroll-target="#to-do-should-we-formally-require-calibration-on-each-site-visit"><strong>To Do</strong>: Should we ‘formally’ require calibration on each site visit?</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting Started</a></li>
  <li><a href="#calibrating-the-7200" id="toc-calibrating-the-7200" class="nav-link" data-scroll-target="#calibrating-the-7200">Calibrating the 7200</a>
  <ul class="collapse">
  <li><a href="#to-do-add-pics-for-each-site" id="toc-to-do-add-pics-for-each-site" class="nav-link" data-scroll-target="#to-do-add-pics-for-each-site"><strong>To Do</strong>: Add pics for each site?</a></li>
  <li><a href="#set-co2-zero" id="toc-set-co2-zero" class="nav-link" data-scroll-target="#set-co2-zero">Set CO<sub>2</sub> zero</a></li>
  <li><a href="#set-co2-span" id="toc-set-co2-span" class="nav-link" data-scroll-target="#set-co2-span">Set CO<sub>2</sub> span</a></li>
  <li><a href="#check-the-coefficients" id="toc-check-the-coefficients" class="nav-link" data-scroll-target="#check-the-coefficients">Check the Coefficients</a></li>
  </ul></li>
  <li><a href="#calibrating-the-7700" id="toc-calibrating-the-7700" class="nav-link" data-scroll-target="#calibrating-the-7700">Calibrating the 7700</a>
  <ul class="collapse">
  <li><a href="#to-do-ask---should-we-save-screenshots-for-7700-calibrations" id="toc-to-do-ask---should-we-save-screenshots-for-7700-calibrations" class="nav-link" data-scroll-target="#to-do-ask---should-we-save-screenshots-for-7700-calibrations"><strong>To Do</strong>: Ask - should we save screenshots for 7700 calibrations?</a></li>
  <li><a href="#set-ch4-zero" id="toc-set-ch4-zero" class="nav-link" data-scroll-target="#set-ch4-zero">Set CH<sub>4</sub> zero</a></li>
  <li><a href="#set-ch4-span" id="toc-set-ch4-span" class="nav-link" data-scroll-target="#set-ch4-span">Set CH<sub>4</sub> span</a>
  <ul class="collapse">
  <li><a href="#to-do-check-the-coefficients" id="toc-to-do-check-the-coefficients" class="nav-link" data-scroll-target="#to-do-check-the-coefficients">To Do: Check the Coefficients</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Calibration Procedures</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This page details the steps for calibrating the 7200 and 7700. Always do the 7200 first, followed by the 7700. You <strong>must</strong> clean the sensors before calibration.</p>
<section id="to-do-should-we-formally-require-calibration-on-each-site-visit" class="level3">
<h3 class="anchored" data-anchor-id="to-do-should-we-formally-require-calibration-on-each-site-visit"><strong>To Do</strong>: Should we ‘formally’ require calibration on each site visit?</h3>
<ul>
<li><p>Calibration should be performed any time you open the LI7200</p></li>
<li><p>If you are not confident with the calibration procedures, you can review the LICRO docs for the <a href="https://www.licor.com/env/support/LI-7200RS/topics/calibration-procedure.html">7200</a> and the <a href="https://www.licor.com/env/support/LI-7700/topics/calibration.html">7700</a></p></li>
</ul>
<details open="">
<summary>
Table of contents
</summary>
{: .text-delta } 1. TOC {:toc}
</details>
<hr>
</section>
<section id="getting-started" class="level1">
<h1>Getting Started</h1>
<p><strong>1</strong>{: .label .label-blue} Make sure the flow module, tubing, 7700 calibration shroud, and necessary wrenches are ready. * <strong>Note</strong> At BB1 &amp; BB2, it is in the equipment box, for DSM &amp; RBM you must bring to the field.</p>
</section>
<section id="calibrating-the-7200" class="level1">
<h1>Calibrating the 7200</h1>
<p><strong>1</strong>{: .label .label-blue} On the laptop open the program ‘Li 7X00’ and connect to instrument. Click the LI-7200 icon and choose ‘calibration’.</p>
<p><strong>2</strong>{: .label .label-blue} Save the old calibration coefficients. Click “Config Files” tab &gt;&gt; “Save Configuration” &gt;&gt; check all and “continue”. * Place the file in this directory “C:”. The LI 7200 serial numbers are listed in the table below. * The naming template is:<br> yyyymmdd(<strong>site visit date</strong>)_Configuration_Before_calibrations.l7x * Screenshots should also be taken before and after calibrating and saved in the same directory.</p>
<h2 align="center" class="anchored" data-anchor-id="calibrating-the-7200">
LI 7200 Serial Numbers
</h2>
<table class="table">
<thead>
<tr class="header">
<th>Site</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>BB1</td>
<td>0816</td>
</tr>
<tr class="even">
<td>BB2</td>
<td>0815</td>
</tr>
<tr class="odd">
<td>DMS</td>
<td>1029</td>
</tr>
<tr class="even">
<td>RBM</td>
<td>…</td>
</tr>
</tbody>
</table>
<p><strong>3</strong>{: .label .label-blue} Check the head serial number information in “LI-7200” &gt; “Calibration” &gt; “Coefficients”. Make sure the head serial number on the sensor matches that in the software (see table above).</p>
<p align="center">
<img src="images/7200_Calibration1.png" width="600">
</p>
<p><strong>4</strong>{: .label .label-blue} Connect the calibration flow tube to the 7200 head. At BB2, DSM &amp; RMB - there is a special intake novel that is always connected to the intake tube? At BB1 you need to do manually disconnect the intake tube first?</p>
<section id="to-do-add-pics-for-each-site" class="level3">
<h3 class="anchored" data-anchor-id="to-do-add-pics-for-each-site"><strong>To Do</strong>: Add pics for each site?</h3>
</section>
<section id="set-co2-zero" class="level2">
<h2 class="anchored" data-anchor-id="set-co2-zero">Set CO<sub>2</sub> zero</h2>
<p><strong>5</strong>{: .label .label-blue} Connect the flow meter to the N<sub>2</sub> gas tank and open main valve <strong>(on is left, off is right)</strong>. * <strong>Note</strong>: PSI should be ~ 1200 (not necessary to the procedure, but good to note as it will decrease over time and indicated when we need a new gas tank)</p>
<p><strong>6</strong>{: .label .label-blue} Open regulator slowly until the flow rate is around 18-20 L/min. You should hear the flow. <strong>Note: reversed directions (on is right, off is left)</strong></p>
<p><strong>7</strong>{: .label .label-blue} Watch plot on the program: CO<sub>2</sub> should drop to 0. On the calibration screen – green flags show that CO<sub>2</sub> concentrations are steady. You may need to change the scale on the chart.</p>
<ul>
<li>Click “Zero CO<sub>2</sub>” &gt; “OK”</li>
<li>Click “Zero H<sub>2</sub>O &gt; “OK”</li>
<li>Check graph values continuously throughout the process to make sure values are correct</li>
</ul>
<p><strong>7</strong>{: .label .label-blue} Close regulator then close the main N<sub>2</sub> tank value and disconnect the flow meter.</p>
</section>
<section id="set-co2-span" class="level2">
<h2 class="anchored" data-anchor-id="set-co2-span">Set CO<sub>2</sub> span</h2>
<p><strong>8</strong>{: .label .label-blue} Move flow meter to CO<sub>2</sub> tank and open the main valve <strong>(on is left, off is right)</strong>. * <strong>Note</strong>: PSI should be ~ 1200 (not necessary to the procedure, but good to note as it will decrease over time and indicated when we need a new gas tank) ### <strong>To Do</strong>: Confirm value?</p>
<p><strong>9</strong>{: .label .label-blue} Open regulator slowly until the flow rate is around 18-20 L/min. You should hear the flow. <strong>Note: reversed directions (on is right, off is left)</strong></p>
<p><strong>10</strong>{: .label .label-blue} Enter CO<sub>2</sub> concentration (ppm), Confirm the <strong>exact</strong> value on the tank. Then Watch plot on the program: CO<sub>2</sub> should increase until it stabilizes. On the calibration screen – green flags show that CO<sub>2</sub> concentrations are steady. You may need to change the scale on the chart again.</p>
<ul>
<li>Click Span CO<sub>2</sub>” &gt; “OK”
<ul>
<li><strong>Do Not</strong> Click Span H<sub>2</sub>O</li>
</ul></li>
</ul>
<p><strong>10</strong>{: .label .label-blue} Close regulator then close the main CO<sub>2</sub> tank value and disconnect the flow meter. * Check how much gas we have left &amp; take a picture</p>
</section>
<section id="check-the-coefficients" class="level2">
<h2 class="anchored" data-anchor-id="check-the-coefficients">Check the Coefficients</h2>
<p><strong>11</strong>{: .label .label-blue} You can find the calibration results in “LI-7200” &gt; “Calibration” &gt; “Manual” tab. Reference the table below for acceptable values. Take a screenshot (alt + print screen) of the manual tab and save it to the Micromet Google drive: Micromet Lab/Projects/(<strong>Flux Site</strong>)/Flux-tower/Calibrations/LI-7200/SNXXXX (reference serial number table above)</p>
<h2 align="center" class="anchored">
Optimal Calibration Constant Values
</h2>
<table class="table">
<colgroup>
<col style="width: 51%">
<col style="width: 35%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>Constant</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CO<sub>2</sub> Zero</td>
<td>0.85 ~ 1.1</td>
<td>Zero is primarily affected by temperature, and the state of the internal chemicals</td>
</tr>
<tr class="even">
<td>CO<sub>2</sub> Span</td>
<td>0.97 ~ 1.03</td>
<td>A value outside this range indicates is a warning sign for me that something is not correct with either the instrument (wrong head, bad sensor) or with the tank (not accurately calibrated).</td>
</tr>
<tr class="odd">
<td>H<sub>2</sub>) Zero</td>
<td>0.9 ~ 1.2</td>
<td>Set in lab (dobule check frequency?)</td>
</tr>
<tr class="even">
<td>H<sub>2</sub>) Span</td>
<td>0.9 ~ 1.1</td>
<td>Set in lab (dobule check frequency?)</td>
</tr>
</tbody>
</table>
<p align="center">
<img src="images/7200_Calibration2.png" width="600">
</p>
<p><strong>12</strong>{: .label .label-blue} Save the after calibration coefficients. Click “Config Files” tab &gt;&gt; “Save Configuration” &gt;&gt; check all and “continue”. Use same naming/saving convention as above.</p>
<p><strong>13</strong>{: .label .label-blue} Disconnect calibration tubing from 7200 intake. All the connections on the tubing that stays connected to the ‘T’ on the 7200 head should be wrench tight when finished with calibrations.</p>
<p><strong>14</strong>{: .label .label-blue} Exit the program</p>
</section>
</section>
<section id="calibrating-the-7700" class="level1">
<h1>Calibrating the 7700</h1>
<section id="to-do-ask---should-we-save-screenshots-for-7700-calibrations" class="level3">
<h3 class="anchored" data-anchor-id="to-do-ask---should-we-save-screenshots-for-7700-calibrations"><strong>To Do</strong>: Ask - should we save screenshots for 7700 calibrations?</h3>
<p><strong>1</strong>{: .label .label-green} Open the program ‘LI-7700’ and go to the data page 1 &gt;&gt; 1 chart CH4 (umol/mol).</p>
<p><strong>2</strong>{: .label .label-green} Use calibration cylinder to cover the 7700. Make sure to remove 7700 head cap and washer tube first then orient the tube with the straps on top and slide tube over the instrument.</p>
<p><strong>3</strong>{: .label .label-green} Attach the small black tube into the LI-7700 cover and attach other end to the black tube with the flow meter (same one as used for 7200). Make sure to check union connections.</p>
</section>
<section id="set-ch4-zero" class="level2">
<h2 class="anchored" data-anchor-id="set-ch4-zero">Set CH<sub>4</sub> zero</h2>
<p><strong>4</strong>{: .label .label-green} Connect the flow meter to the N<sub>2</sub> gas tank and open main valve <strong>(on is left, off is right)</strong>. * <strong>Note</strong>: PSI should be ~ 1200 (not necessary to the procedure, but good to note as it will decrease over time and indicated when we need a new gas tank)</p>
<p><strong>5</strong>{: .label .label-green} Open regulator slowly until the flow rate is around 18-20 L/min. You should hear the flow. <strong>Note: reversed directions (on is right, off is left)</strong></p>
<p><strong>5</strong>{: .label .label-green} Watch plot on the program: CH<sub>4</sub> should drop to 0 (or ~.13). On the calibration screen – green flags show that it’s steady Change scale if needed to check that the trace is flat/steady</p>
<ul>
<li>Click “Zero CH<sub>4</sub>” &gt; “Apply”</li>
</ul>
<p><strong>6</strong>{: .label .label-green} Close regulator then close the main N<sub>2</sub> tank value and disconnect the flow meter. * Check how much gas we have left &amp; take a picture</p>
</section>
<section id="set-ch4-span" class="level2">
<h2 class="anchored" data-anchor-id="set-ch4-span">Set CH<sub>4</sub> span</h2>
<p><strong>7</strong>{: .label .label-green} Move flow meter to CH<sub>4</sub> tank and open the main valve <strong>(on is left, off is right)</strong>. * <strong>Note</strong>: PSI should be ~ 1200 (not necessary to the procedure, but good to note as it will decrease over time and indicated when we need a new gas tank) ### <strong>To Do</strong>: Confirm value?</p>
<p><strong>8</strong>{: .label .label-green} Enter CH<sub>4</sub> concentration (ppm), Confirm the <strong>exact</strong> value on the tank. Then Watch plot on the program: CH<sub>4</sub> should increase until it stabilizes. On the calibration screen – green flags show that CH<sub>4</sub> concentrations are steady. You may need to change the scale on the chart again. * Click “Span CH<sub>4</sub>” &gt; “Apply”</p>
<p><strong>9</strong>{: .label .label-green} Close regulator then close the main CH<sub>4</sub> tank value and disconnect the flow meter. * Check how much gas we have left &amp; take a picture</p>
<p><strong>10</strong>{: .label .label-green} Remove the calibration shield, make sure to disconnect the tubing first. Then make sure to replace the 7700 head cap and washer tube first.</p>
<section id="to-do-check-the-coefficients" class="level3">
<h3 class="anchored" data-anchor-id="to-do-check-the-coefficients">To Do: Check the Coefficients</h3>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>